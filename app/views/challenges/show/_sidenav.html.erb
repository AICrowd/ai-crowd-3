<% if challenge.meta_challenge %>
  <header class="section-header-decorative mb-0">
    <div>
      <h4>Participants</h4>
    </div>
  </header>
  <div>
    <% users = challenge.challenge_participants.sample(50) %>
    <% if required_terms_or_rules_path(challenge).present? %>
      <div class="participants floating-button">
        <%= link_to required_terms_or_rules_path(challenge) do %>
          <button type="button" class="btn btn-primary btn-block" data-toggle="Click to register for challenge">ğŸ”“ Participate</button>
        <% end %>
      </div>
      <div class="row avatar-group p-3 participants floating-base">
    <% else %>
      <div class="row avatar-group p-3">
    <% end %>
    <% if current_participant && !required_terms_or_rules_path(challenge).present? %>
      <span>
        <%= render partial: 'participants/get_user_profile', locals: { participant: current_participant, username: 'false' } %>
      </span>
    <% end %>
    <% users.each do |user| %>
      <% if !(current_participant && user.id==current_participant.id) %>
        <span>
          <%= render partial: 'participants/get_user_profile', locals: { participant: user.participant, username: 'false' } %>
        </span>
      <% end %>
    <% end %>
    </div>
  </div>
<% end %>
<% if policy(challenge).show_leaderboard? && top_leaderboards.present? %>
  <%= render 'challenges/show/top_five_leaderboards', top_leaderboards: top_leaderboards, challenge: challenge %>
<% end %>
<% if policy(challenge).show_submissions? && (latest_submissions.present? || @challenge.meta_challenge) %>
  <%= render 'challenges/show/latest_five_submissions', latest_submissions: latest_submissions, challenge: challenge %>
<% end %>
<% if challenge_baseline_discussion.present? %>
  <%= render 'challenges/show/baseline_discussions', challenge_baseline_discussion: challenge_baseline_discussion, challenge: challenge %>
<% end %>
